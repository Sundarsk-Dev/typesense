<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Typesense - Analyze your typing patterns, speed, and mood through real-time keystroke analysis"
    />
    <title>Typesense — Advanced Typing Pattern Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Custom animations */
      @keyframes pulse-glow {
        0%,
        100% {
          box-shadow: 0 0 20px rgba(251, 191, 36, 0.3);
        }
        50% {
          box-shadow: 0 0 30px rgba(251, 191, 36, 0.5);
        }
      }
      .typing-active {
        animation: pulse-glow 2s infinite;
      }
    </style>
  </head>
  <body
    class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-gray-100 flex items-center justify-center min-h-screen p-4"
  >
    <div
      class="w-full max-w-2xl p-8 text-center bg-gray-800/50 backdrop-blur-sm rounded-2xl shadow-2xl"
    >
      <!-- Header -->
      <header>
        <h1
          class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-400"
        >
          Typesense
        </h1>
        <p class="text-gray-300 mt-3 text-lg">
          Analyze your subconscious typing patterns. Choose a test duration and
          type naturally — we'll calculate speed, pauses, corrections, and mood.
        </p>
      </header>

      <!-- Duration Selector -->
      <nav
        class="mt-8 flex justify-center gap-4"
        role="navigation"
        aria-label="Test duration options"
      >
        <button
          data-duration="5"
          class="duration-btn px-6 py-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed"
          aria-label="Start 5 second typing test"
        >
          5s Test
        </button>
        <button
          data-duration="10"
          class="duration-btn px-6 py-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed"
          aria-label="Start 10 second typing test"
        >
          10s Test
        </button>
        <button
          data-duration="30"
          class="duration-btn px-6 py-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed"
          aria-label="Start 30 second typing test"
        >
          30s Test
        </button>
      </nav>

      <!-- Typing Box -->
      <main class="mt-8">
        <div class="relative">
          <textarea
            id="typingBox"
            disabled
            class="w-full h-48 p-5 rounded-xl bg-gray-900/80 text-gray-100 border-2 border-gray-700 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/50 outline-none resize-none transition-all duration-300 text-lg font-mono disabled:opacity-60"
            placeholder="Choose a duration to begin typing..."
            aria-label="Typing input area"
          ></textarea>
          <div
            id="characterCount"
            class="absolute bottom-4 right-4 text-gray-500 text-sm hidden"
          >
            <span id="charCount">0</span> characters
          </div>
        </div>

        <!-- Status Indicators -->
        <div class="mt-6 flex justify-center items-center gap-8">
          <div
            id="timer"
            class="text-2xl font-bold text-yellow-300"
            role="timer"
            aria-live="polite"
          ></div>
          <div id="liveStats" class="hidden text-sm text-gray-400 space-x-4">
            <span
              >WPM:
              <span id="liveWPM" class="text-yellow-400 font-bold"
                >0</span
              ></span
            >
            <span
              >Corrections:
              <span id="liveBackspaces" class="text-orange-400 font-bold"
                >0</span
              ></span
            >
          </div>
        </div>

        <!-- Result -->
        <div
          id="result"
          class="mt-6 p-4 rounded-lg bg-gray-700/50 hidden transition-all duration-500"
          role="alert"
        >
          <p class="text-xl font-semibold text-green-400"></p>
        </div>

        <!-- Action Buttons -->
        <div class="mt-8 flex justify-center gap-4">
          <a
            href="/stats"
            class="px-6 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 transition-all duration-200 text-gray-300 hover:text-white"
          >
            View History
          </a>
          <button
            id="resetBtn"
            class="hidden px-6 py-2 bg-yellow-600 rounded-lg hover:bg-yellow-500 transition-all duration-200 text-gray-900 font-semibold"
            aria-label="Reset typing test"
          >
            Try Again
          </button>
        </div>
      </main>
    </div>

    <script src="/static/script.js" defer></script>
  </body>
</html>
